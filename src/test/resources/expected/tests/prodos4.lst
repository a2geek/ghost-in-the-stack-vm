MAIN:
    DIM _ONERR_TARGET AS ADDRESS = null
    DIM _ONERR_FP AS ADDRESS = null
    DIM _ONERR_SP AS ADDRESS = null
   0:     CALL PRODOS.ENSUREPREFIXSET()
   0:     CALL RUNTIME.PRINT_STRING("BEFORE CREATE FILE")
   1:     CALL RUNTIME.PRINT_NEWLINE()
   2:     CALL PRODOS.CREATEFILE("TEST1", 4, 0)
   3:     CALL RUNTIME.PRINT_STRING("AFTER CREATE FILE")
   4:     CALL RUNTIME.PRINT_NEWLINE()
   5:     ON ERROR GOTO _HANDLEERROR12
   6:     CALL PRODOS.UNLOCK("TEST1B")
   7:     CALL PRODOS.DESTROY("TEST1B")
   8: _DOMORE13:
   9:     CALL PRODOS.RENAME("TEST1", "TEST1B")
  10:     CALL PRODOS.LOCK("TEST1B")
  11:     END
  12: _HANDLEERROR12:
  13:     IF (ERR.NUMBER = 70) THEN
   0:         CALL RUNTIME.PRINT_STRING("FILE DOES NOT EXIST")
   1:         CALL RUNTIME.PRINT_NEWLINE()
   2:         ON ERROR DISABLE
   3:         GOTO _DOMORE13
          END IF
  14:     CALL RUNTIME.PRINT_STRING("PRODOS ERROR!")
  15:     CALL RUNTIME.PRINT_NEWLINE()
  16:     CALL RUNTIME.PRINT_STRING("NUMBER:  ")
  17:     CALL RUNTIME.PRINT_INTEGER(ERR.NUMBER)
  18:     CALL RUNTIME.PRINT_NEWLINE()
  19:     CALL RUNTIME.PRINT_STRING("MESSAGE: ")
  20:     CALL RUNTIME.PRINT_STRING(ERR.MESSAGE)
  21:     CALL RUNTIME.PRINT_NEWLINE()
  22:     END

