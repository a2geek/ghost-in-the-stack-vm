MAIN:
    DIM _ONERR_TARGET AS ADDRESS = null
    DIM _ONERR_FP AS ADDRESS = null
    DIM _ONERR_SP AS ADDRESS = null
   0:     CALL PRODOS.ENSUREPREFIXSET()
   0:     CALL RUNTIME.PRINT_STRING("BEFORE CREATE FILE")
   1:     CALL RUNTIME.PRINT_NEWLINE()
   2:     CALL PRODOS.CREATEFILE("TEST1", 4, 0)
   3:     CALL RUNTIME.PRINT_STRING("AFTER CREATE FILE")
   4:     CALL RUNTIME.PRINT_NEWLINE()
   5:     ON ERROR GOTO _HANDLEERROR19
   6:     CALL RUNTIME.PRINT_STRING("BEFORE UNLOCK")
   7:     CALL RUNTIME.PRINT_NEWLINE()
   8:     CALL PRODOS.UNLOCK("TEST1B")
   9:     CALL RUNTIME.PRINT_STRING("AFTER UNLOCK, BEFORE DESTROY")
  10:     CALL RUNTIME.PRINT_NEWLINE()
  11:     CALL PRODOS.DESTROY("TEST1B")
  12:     CALL RUNTIME.PRINT_STRING("AFTER DESTROY")
  13:     CALL RUNTIME.PRINT_NEWLINE()
  14: _DOMORE20:
  15:     CALL RUNTIME.PRINT_STRING("BEFORE RENAME")
  16:     CALL RUNTIME.PRINT_NEWLINE()
  17:     CALL PRODOS.RENAME("TEST1", "TEST1B")
  18:     CALL RUNTIME.PRINT_STRING("AFTER RENAME; BEFORE LOCK")
  19:     CALL RUNTIME.PRINT_NEWLINE()
  20:     CALL PRODOS.LOCK("TEST1B")
  21:     CALL RUNTIME.PRINT_STRING("AFTER LOCK")
  22:     CALL RUNTIME.PRINT_NEWLINE()
  23:     CALL TEXT.INVERSE()
  24:     CALL RUNTIME.PRINT_STRING("SUCCESS")
  25:     CALL RUNTIME.PRINT_NEWLINE()
  26:     CALL TEXT.NORMAL()
  27:     END
  28: _HANDLEERROR19:
  29:     IF (ERR.NUMBER = 70) THEN
   0:         CALL RUNTIME.PRINT_STRING("FILE DOES NOT EXIST")
   1:         CALL RUNTIME.PRINT_NEWLINE()
   2:         ON ERROR DISABLE
   3:         GOTO _DOMORE20
          END IF
  30:     CALL RUNTIME.PRINT_STRING("PRODOS ERROR!")
  31:     CALL RUNTIME.PRINT_NEWLINE()
  32:     CALL RUNTIME.PRINT_STRING("NUMBER:  ")
  33:     CALL RUNTIME.PRINT_INTEGER(ERR.NUMBER)
  34:     CALL RUNTIME.PRINT_NEWLINE()
  35:     CALL RUNTIME.PRINT_STRING("MESSAGE: ")
  36:     CALL RUNTIME.PRINT_STRING(ERR.MESSAGE)
  37:     CALL RUNTIME.PRINT_NEWLINE()
  38:     END

