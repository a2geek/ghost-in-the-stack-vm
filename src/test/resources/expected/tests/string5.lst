MAIN:
    DIM _ONERR_TARGET AS ADDRESS = null
    DIM _ONERR_FP AS ADDRESS = null
    DIM _ONERR_SP AS ADDRESS = null
    DIM A$ AS STRING = [""]
    DIM B$ AS STRING = [""]
    DIM C$ AS STRING = [""]
    DIM D$ AS STRING = [""]
    DIM EXPECTED$ AS STRING = [""]
   0:     *(105) = 32768
   1:     CALL MEMORY.HEAPINIT()
   0:     CALL MEMORY.HEAPREFDECR(addrof(EXPECTED$))
   1:     EXPECTED$ = "Hello, World!"
   2:     CALL MEMORY.HEAPREFINCR(EXPECTED$)
   3:     CALL MEMORY.HEAPREFDECR(addrof(A$))
   4:     A$ = STRINGS.LEFT$(EXPECTED$, 5)
   5:     CALL MEMORY.HEAPREFINCR(A$)
   6:     CALL MEMORY.HEAPREFDECR(addrof(B$))
   7:     B$ = STRINGS.RIGHT$(EXPECTED$, 6)
   8:     CALL MEMORY.HEAPREFINCR(B$)
   9:     CALL MEMORY.HEAPREFDECR(addrof(C$))
  10:     C$ = STRINGS.MID$(EXPECTED$, 8, (- 1))
  11:     CALL MEMORY.HEAPREFINCR(C$)
  12:     CALL MEMORY.HEAPREFDECR(addrof(D$))
  13:     D$ = STRINGS.MID$(EXPECTED$, 4, 6)
  14:     CALL MEMORY.HEAPREFINCR(D$)
  15:     CALL RUNTIME.PRINT_STRING("Actuals:")
  16:     CALL RUNTIME.PRINT_NEWLINE()
  17:     CALL RUNTIME.PRINT_STRING("A$='")
  18:     CALL RUNTIME.PRINT_STRING(A$)
  19:     CALL RUNTIME.PRINT_STRING("', expected:'Hello'")
  20:     CALL RUNTIME.PRINT_NEWLINE()
  21:     CALL RUNTIME.PRINT_STRING("B$='")
  22:     CALL RUNTIME.PRINT_STRING(B$)
  23:     CALL RUNTIME.PRINT_STRING("', expected:'World!'")
  24:     CALL RUNTIME.PRINT_NEWLINE()
  25:     CALL RUNTIME.PRINT_STRING("C$='")
  26:     CALL RUNTIME.PRINT_STRING(C$)
  27:     CALL RUNTIME.PRINT_STRING("', expected:'World!'")
  28:     CALL RUNTIME.PRINT_NEWLINE()
  29:     CALL RUNTIME.PRINT_STRING("D$='")
  30:     CALL RUNTIME.PRINT_STRING(D$)
  31:     CALL RUNTIME.PRINT_STRING("', expected:'lo, Wo'")
  32:     CALL RUNTIME.PRINT_NEWLINE()
  33:     CALL TEXT.INVERSE()
  34:     IF ((((STRINGS.STRCMP(A$, "Hello") = 0) and (STRINGS.STRCMP(B$, "World!") = 0)) and (STRINGS.STRCMP(C$, "World!") = 0)) and (STRINGS.STRCMP(D$, "lo, Wo") = 0)) THEN
   0:         CALL RUNTIME.PRINT_STRING("SUCCESS")
   1:         CALL RUNTIME.PRINT_NEWLINE()
          ELSE
   0:         CALL RUNTIME.PRINT_STRING("FAIL")
   1:         CALL RUNTIME.PRINT_NEWLINE()
          END IF
  35:     CALL TEXT.NORMAL()
  36:     END

