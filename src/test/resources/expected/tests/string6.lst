MAIN:
    DIM _ONERR_TARGET AS ADDRESS = null
    DIM _ONERR_FP AS ADDRESS = null
    DIM _ONERR_SP AS ADDRESS = null
    DIM A$ AS STRING = null
    DIM N AS INTEGER = null
    DIM _TEMP21 AS STRING = null
    DIM _TEMP22 AS STRING = null
    DIM _TEMP23 AS STRING = null
    DIM _TEMP24 AS STRING = null
   0:     *(105) = 32768
   1:     CALL MEMORY.HEAPINIT()
   0:     N = MEMORY.MEMFREE()
   1:     CALL RUNTIME.PRINT_STRING("Starting with ")
   2:     CALL RUNTIME.PRINT_INTEGER(N)
   3:     CALL RUNTIME.PRINT_STRING(" bytes free.")
   4:     CALL RUNTIME.PRINT_NEWLINE()
   5:     CALL RUNTIME.PRINT_STRING("one")
   6:     CALL RUNTIME.PRINT_NEWLINE()
   7:     A$ = "The "
   8:     CALL RUNTIME.PRINT_STRING("two")
   9:     CALL RUNTIME.PRINT_NEWLINE()
  10:     _TEMP21 = MEMORY.HEAPALLOC(((STRINGS.LEN(A$) + STRINGS.LEN("quick brown ")) + 2))
  11:     *(_TEMP21) = CByte((STRINGS.LEN(A$) + STRINGS.LEN("quick brown ")))
  12:     CALL STRINGS.STRCAT(_TEMP21, A$)
  13:     CALL STRINGS.STRCAT(_TEMP21, "quick brown ")
  14:     CALL MEMORY.HEAPFREE(A$)
  15:     A$ = _TEMP21
  16:     CALL RUNTIME.PRINT_STRING("three")
  17:     CALL RUNTIME.PRINT_NEWLINE()
  18:     _TEMP22 = MEMORY.HEAPALLOC(((STRINGS.LEN(A$) + STRINGS.LEN("fox jumps ")) + 2))
  19:     *(_TEMP22) = CByte((STRINGS.LEN(A$) + STRINGS.LEN("fox jumps ")))
  20:     CALL STRINGS.STRCAT(_TEMP22, A$)
  21:     CALL STRINGS.STRCAT(_TEMP22, "fox jumps ")
  22:     CALL MEMORY.HEAPFREE(A$)
  23:     _TEMP23 = MEMORY.HEAPALLOC(((STRINGS.LEN(_TEMP22) + STRINGS.LEN("over the")) + 2))
  24:     *(_TEMP23) = CByte((STRINGS.LEN(_TEMP22) + STRINGS.LEN("over the")))
  25:     CALL STRINGS.STRCAT(_TEMP23, _TEMP22)
  26:     CALL STRINGS.STRCAT(_TEMP23, "over the")
  27:     CALL MEMORY.HEAPFREE(_TEMP22)
  28:     _TEMP24 = MEMORY.HEAPALLOC(((STRINGS.LEN(_TEMP23) + STRINGS.LEN(" lazy dog.")) + 2))
  29:     *(_TEMP24) = CByte((STRINGS.LEN(_TEMP23) + STRINGS.LEN(" lazy dog.")))
  30:     CALL STRINGS.STRCAT(_TEMP24, _TEMP23)
  31:     CALL STRINGS.STRCAT(_TEMP24, " lazy dog.")
  32:     CALL MEMORY.HEAPFREE(_TEMP23)
  33:     A$ = _TEMP24
  34:     CALL RUNTIME.PRINT_STRING("Result: ")
  35:     CALL RUNTIME.PRINT_NEWLINE()
  36:     CALL RUNTIME.PRINT_STRING(A$)
  37:     CALL RUNTIME.PRINT_NEWLINE()
  38:     CALL MEMORY.HEAPFREE(A$)
  39:     CALL RUNTIME.PRINT_STRING("Ending with ")
  40:     CALL RUNTIME.PRINT_INTEGER(N)
  41:     CALL RUNTIME.PRINT_STRING(" bytes free.")
  42:     CALL RUNTIME.PRINT_NEWLINE()
  43:     CALL TEXT.INVERSE()
  44:     IF (N = MEMORY.MEMFREE()) THEN
   0:         CALL RUNTIME.PRINT_STRING("SUCCESS")
   1:         CALL RUNTIME.PRINT_NEWLINE()
          ELSE
   0:         CALL RUNTIME.PRINT_STRING("FAIL")
   1:         CALL RUNTIME.PRINT_NEWLINE()
          END IF
  45:     CALL TEXT.NORMAL()
  46:     END

