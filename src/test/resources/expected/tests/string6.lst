MAIN:
    DIM _ONERR_TARGET AS ADDRESS = null
    DIM _ONERR_FP AS ADDRESS = null
    DIM _ONERR_SP AS ADDRESS = null
    DIM A$ AS STRING = null
    DIM N AS INTEGER = null
    DIM _TEMP21 AS STRING = null
    DIM _TEMP22 AS STRING = null
    DIM _TEMP23 AS STRING = null
    DIM _TEMP24 AS STRING = null
   0:     *(105) = 32768
   1:     CALL MEMORY.HEAPINIT()
   0:     N = MEMORY.MEMFREE()
   1:     CALL RUNTIME.PRINT_STRING("Starting with ")
   2:     CALL RUNTIME.PRINT_INTEGER(N)
   3:     CALL RUNTIME.PRINT_STRING(" bytes free.")
   4:     CALL RUNTIME.PRINT_NEWLINE()
   5:     A$ = "The "
   6:     _TEMP21 = MEMORY.HEAPALLOC(((STRINGS.LEN(A$) + STRINGS.LEN("quick brown ")) + 2))
   7:     *(_TEMP21) = CByte((STRINGS.LEN(A$) + STRINGS.LEN("quick brown ")))
   8:     CALL STRINGS.STRCAT(_TEMP21, A$)
   9:     CALL STRINGS.STRCAT(_TEMP21, "quick brown ")
  10:     CALL MEMORY.HEAPFREE(A$)
  11:     A$ = _TEMP21
  12:     _TEMP22 = MEMORY.HEAPALLOC(((STRINGS.LEN(A$) + STRINGS.LEN("fox jumps ")) + 2))
  13:     *(_TEMP22) = CByte((STRINGS.LEN(A$) + STRINGS.LEN("fox jumps ")))
  14:     CALL STRINGS.STRCAT(_TEMP22, A$)
  15:     CALL STRINGS.STRCAT(_TEMP22, "fox jumps ")
  16:     CALL MEMORY.HEAPFREE(A$)
  17:     _TEMP23 = MEMORY.HEAPALLOC(((STRINGS.LEN(_TEMP22) + STRINGS.LEN("over the")) + 2))
  18:     *(_TEMP23) = CByte((STRINGS.LEN(_TEMP22) + STRINGS.LEN("over the")))
  19:     CALL STRINGS.STRCAT(_TEMP23, _TEMP22)
  20:     CALL STRINGS.STRCAT(_TEMP23, "over the")
  21:     CALL MEMORY.HEAPFREE(_TEMP22)
  22:     _TEMP24 = MEMORY.HEAPALLOC(((STRINGS.LEN(_TEMP23) + STRINGS.LEN(" lazy dog.")) + 2))
  23:     *(_TEMP24) = CByte((STRINGS.LEN(_TEMP23) + STRINGS.LEN(" lazy dog.")))
  24:     CALL STRINGS.STRCAT(_TEMP24, _TEMP23)
  25:     CALL STRINGS.STRCAT(_TEMP24, " lazy dog.")
  26:     CALL MEMORY.HEAPFREE(_TEMP23)
  27:     A$ = _TEMP24
  28:     CALL RUNTIME.PRINT_STRING("Result: ")
  29:     CALL RUNTIME.PRINT_NEWLINE()
  30:     CALL RUNTIME.PRINT_STRING(A$)
  31:     CALL RUNTIME.PRINT_NEWLINE()
  32:     CALL MEMORY.HEAPFREE(A$)
  33:     CALL RUNTIME.PRINT_STRING("Ending with ")
  34:     CALL RUNTIME.PRINT_INTEGER(N)
  35:     CALL RUNTIME.PRINT_STRING(" bytes free.")
  36:     CALL RUNTIME.PRINT_NEWLINE()
  37:     CALL TEXT.INVERSE()
  38:     IF (N = MEMORY.MEMFREE()) THEN
   0:         CALL RUNTIME.PRINT_STRING("SUCCESS")
   1:         CALL RUNTIME.PRINT_NEWLINE()
          ELSE
   0:         CALL RUNTIME.PRINT_STRING("FAIL")
   1:         CALL RUNTIME.PRINT_NEWLINE()
          END IF
  39:     CALL TEXT.NORMAL()
  40:     END

