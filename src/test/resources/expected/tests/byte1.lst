MAIN:
    DIM _ONERR_TARGET AS ADDRESS = null
    DIM _ONERR_FP AS ADDRESS = null
    DIM _ONERR_SP AS ADDRESS = null
    DIM GOOD AS INTEGER = null
    DIM BAD AS INTEGER = null
    DIM B1 AS INTEGER = null
    DIM B2 AS INTEGER = null
    DIM B3 AS INTEGER = null
   0:     CALL TEXT.TEXT()
   1:     CALL TEXT.HOME()
   2:     CALL RUNTIME.PRINT_STRING("Setting up byte values...")
   3:     CALL RUNTIME.PRINT_NEWLINE()
   4:     B1 = 254
   5:     B2 = 153
   6:     B3 = 0
   7:     CALL RUNTIME.PRINT_STRING("Checking byte values...")
   8:     CALL RUNTIME.PRINT_NEWLINE()
   9:     CALL CHECK("b1", B1, 254)
  10:     CALL CHECK("b2", B2, 153)
  11:     CALL CHECK("b3", B3, 0)
  12:     CALL TEXT.INVERSE()
  13:     IF (BAD = 0) THEN
   0:         CALL RUNTIME.PRINT_STRING("SUCCESS")
   1:         CALL RUNTIME.PRINT_NEWLINE()
          ELSE
   0:         CALL RUNTIME.PRINT_STRING("FAILURE; GOOD=")
   1:         CALL RUNTIME.PRINT_INTEGER(GOOD)
   2:         CALL RUNTIME.PRINT_STRING(", BAD=")
   3:         CALL RUNTIME.PRINT_INTEGER(BAD)
   4:         CALL RUNTIME.PRINT_NEWLINE()
          END IF
  14:     CALL TEXT.NORMAL()
  15:     END

SUB CHECK(BYVAL EXPECTED AS INTEGER, BYVAL ACTUAL AS INTEGER, BYVAL LABEL AS STRING)
   0:     CALL RUNTIME.PRINT_STRING(LABEL)
   1:     CALL RUNTIME.PRINT_STRING("( ")
   2:     CALL RUNTIME.PRINT_INTEGER(ACTUAL)
   3:     CALL RUNTIME.PRINT_STRING(" = ")
   4:     CALL RUNTIME.PRINT_INTEGER(EXPECTED)
   5:     CALL RUNTIME.PRINT_STRING("): ")
   6:     IF (ACTUAL = EXPECTED) THEN
   0:         CALL RUNTIME.PRINT_STRING("Ok.")
   1:         CALL RUNTIME.PRINT_NEWLINE()
   2:         GOOD = (GOOD + 1)
          ELSE
   0:         CALL RUNTIME.PRINT_STRING("Fail.")
   1:         CALL RUNTIME.PRINT_NEWLINE()
   2:         BAD = (BAD + 1)
          END IF
END SUB

